/* 基本重置和 Body 样式 */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    margin: 0;
    padding: 0;
    /* 新配色方案：浅绿色调渐变背景 */
    background: linear-gradient(to bottom right, #f8fdfa, #e0f2f4); /* 浅绿色到浅蓝色渐变 */
    color: #333;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.container {
    max-width: 1000px;
    width: 95%;
    margin: 30px auto 20px auto; /* 自动外边距居中 */
    background: #fff;
    padding: 30px 40px;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.08);
    flex-shrink: 0;
    flex-grow: 1; /* Ensure container grows if content requires it */
    display: flex; /* Use flex within container to stack header, tabs, content */
    flex-direction: column;
    box-sizing: border-box; /* Ensure padding is included in width/height */
}

header {
    text-align: center;
    margin-bottom: 30px;
}

h1 {
    color: #5ac1a6; /* 薄荷绿 */
    margin-bottom: 0.3em;
    font-size: 2.2em;
}

h2 {
     color: #4a4a4a; /* 柔和深灰 */
     margin-top: 0;
     margin-bottom: 1em;
     font-size: 1.5em;
     border-bottom: 1px solid #eee;
     padding-bottom: 8px;
     font-weight: normal;
}

.warning-note {
    text-align: center;
    color: #e65100; /* 深橙 */
    margin-top: 1.5em;
    margin-bottom: 2.5em;
    font-size: 0.95em;
    background-color: #fff8e1; /* 浅黄 */
    padding: 12px;
    border-left: 4px solid #e65100;
    border-radius: 4px;
}

/* Tabs 样式 */
.tabs {
    display: flex;
    margin-bottom: 25px;
    border-bottom: 2px solid #5ac1a6; /* 主色调下边框 */
    justify-content: center; /* Tab 按钮居中 */
    padding-bottom: 0;
    flex-wrap: wrap; /* 允许换行 */
}

.tab-button {
    padding: 12px 25px;
    cursor: pointer;
    border: none;
    background-color: #e0f2f4; /* 浅冷灰/蓝 */
    margin: 0 3px;
    border-radius: 8px 8px 0 0;
    font-size: 1em;
    font-weight: bold;
    transition: background-color 0.3s ease, color 0.3s ease;
    flex-grow: 1; /* 换行时等分宽度 */
    text-align: center; /* 文本居中 */
    min-width: 120px; /* 最小宽度 */
    box-sizing: border-box;
}

.tab-button:hover:not(.active) {
    background-color: #c7e6ea; /* 稍深鼠标悬停 */
}

.tab-button.active {
    background-color: #5ac1a6; /* 主色调激活 */
    color: white;
    position: relative;
    bottom: -2px; /* 下移 2px 覆盖边框 */
    border-bottom: 2px solid #5ac1a6; /* 激活状态下边框 */
}

/* Tab 内容样式 */
.tab-content {
    display: none;
    padding-top: 25px;
    flex-grow: 1; /* 填充可用空间 */
}

.tab-content.active {
    display: block;
}

/* 两列布局 */
.content-layout {
    display: flex;
    gap: 40px; /* 列间距 */
    margin-bottom: 20px; /* 布局下方间距 */
    flex-wrap: wrap; /* 允许换行到单列 */
    flex-grow: 1; /* 填充可用空间 */
}

.left-panel,
.right-panel {
    flex: 1; /* 等分空间 */
    min-width: 300px; /* 最小宽度 */
    display: flex;
    flex-direction: column; /* 元素纵向堆叠 */
}

/* 确保 .result-group 在 right-panel 中使用 flex 纵向堆叠其子元素 */
.right-panel .result-group {
    display: flex;
    flex-direction: column;
    flex-grow: 1; /* 填充可用空间 */
}

/* 使 textarea 填充列中的可用高度 */
.left-panel textarea,
.right-panel textarea {
    flex-grow: 1;
    min-height: 150px; /* 最小高度 */
    box-sizing: border-box;
}

.form-group {
    margin-bottom: 20px; /* Form 组垂直间距 */
    display: flex; /* 使用 flex 布局标签和输入框 */
    flex-direction: column; /* 标签在输入框上方 */
}

label {
    display: flex; /* 标签文本和计数使用 flex 布局 */
    justify-content: space-between; /* 推向两端 */
    align-items: center; /* 垂直居中 */
    margin-bottom: 8px; /* 标签与输入框间距 */
    font-weight: bold;
    color: #555;
    font-size: 1em;
    flex-shrink: 0; /* 防止缩小 */
}

/* 字符计数 span 样式 */
.char-count {
    font-weight: normal;
    font-size: 0.9em;
    color: #6c757d; /* 灰色 */
    margin-left: 10px; /* 与标签文本间距 */
    flex-shrink: 0; /* 防止缩小 */
}

input[type="text"],
input[type="password"],
textarea {
    width: 100%; /* 填充父元素宽度 */
    padding: 12px;
    border: 1px solid #ced4da;
    border-radius: 6px;
    box-sizing: border-box; /* 内边距和边框不增加宽度 */
    font-size: 1em;
    font-family: inherit;
    color: #495057;
    transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}

input[type="text"]:focus,
input[type="password"]:focus,
textarea:focus {
    border-color: #99d5c9; /* 浅薄荷绿 */
    outline: 0;
    box-shadow: 0 0 0 0.2rem rgba(90, 193, 166, 0.25); /* 使用主色调透明阴影 */
}

/* Slider 特殊样式 */
.slider-container {
     display: flex;
     align-items: center;
     gap: 10px;
     margin-bottom: 5px;
     width: 100%; /* 填充 form-group 宽度 */
}
.slider-container input[type="range"] {
    width: auto; /* 覆盖通用 input 规则 */
    max-width: none;
}

input[type="range"] {
    flex-grow: 1;
    margin: 0;
    padding: 0;
    -webkit-appearance: none;
    appearance: none;
    background: #ddd;
    border-radius: 5px;
    height: 8px;
    cursor: pointer;
}

input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    background: #5ac1a6; /* 主色调 */
    border-radius: 50%;
    cursor: pointer;
    transition: background-color 0.15s ease-in-out;
}

input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    background: #5ac1a6; /* 主色调 */
    border-radius: 50%;
    cursor: pointer;
    transition: background-color 0.15s ease-in-out;
}

input[type="range"]::-webkit-slider-thumb:hover,
input[type="range"]::-moz-range-thumb:hover {
     background: #45a08c; /* 鼠标悬停稍深 */
}

#density-value {
    display: inline-block;
    width: 50px;
    text-align: right;
    font-weight: bold;
    color: #5ac1a6; /* 主色调 */
    font-variant-numeric: tabular-nums; /* 数字等宽 */
    flex-shrink: 0; /* 防止缩小 */
}

small {
    display: block;
    color: #6c757d; /* 灰色 */
    font-size: 0.85em;
    margin-top: 5px;
}

/* 按钮 */
.button-container {
    text-align: center;
    margin-top: 15px;
    margin-bottom: 20px; /* 按钮下方间距 */
}

.action-button {
    padding: 14px 30px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 1.1em;
    font-weight: bold;
    transition: background-color 0.3s ease, opacity 0.3s ease;
    min-width: 200px;
}

.action-button.primary {
     background-color: #5ac1a6; /* 主色调 */
     color: white;
}

.action-button.primary:hover {
    background-color: #45a08c; /* 鼠标悬停稍深 */
}

.action-button:disabled {
    background-color: #ccc;
    cursor: not-allowed;
    opacity: 0.7;
}

.copy-button {
    background-color: #6c757d; /* 灰色 */
    color: white;
    padding: 10px 15px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.95em;
    margin-top: 10px;
    display: inline-block;
    transition: background-color 0.3s ease;
}

.copy-button:hover {
    background-color: #5a6268; /* 鼠标悬停稍深 */
}

/* 输出显示区 (p 元素) */
.output-display {
    background-color: #e9ecef; /* 浅灰背景 */
    padding: 15px;
    border-radius: 6px;
    min-height: 5em; /* 最小高度 */
    word-break: break-word; /* 长单词换行 */
    white-space: pre-wrap; /* 保留空格换行 */
    border: 1px solid #ced4da;
    color: #495057;
    overflow: auto; /* 允许内容溢出时出现滚动条 */
    font-size: 0.95em;
    flex-grow: 1; /* 填充可用高度 */
    display: block;
    margin-bottom: 10px; /* 与下方复制按钮间距 */
    box-sizing: border-box; /* 内边距和边框不增加尺寸 */
}
/* 覆盖 textarea 输出 textarea 的最小高度 */
textarea#embed-output {
    min-height: 150px; /* 与输入 textarea 高度一致 */
}

/* --- 通知容器和通知框 --- */

#notification-container {
    position: fixed; /* 固定定位 */
    top: 20px; /* 距顶部 20px */
    right: 20px; /* 距右侧 20px */
    z-index: 1050; /* 确保在大多数元素上方 */
    display: flex;
    flex-direction: column; /* 元素纵向堆叠 */
    gap: 12px; /* 通知框之间间距 */
    max-height: calc(100vh - 40px); /* 最大高度不超过屏幕高度 */
    overflow-y: auto; /* 通知过多时垂直滚动 */
    width: 100%; /* 允许 max-width 生效 */
    max-width: 350px; /* 通知框最大宽度 */
    /* 添加内边距以防止内容贴边，并在小屏幕上提供侧边缓冲 */
    padding: 0 10px;
    box-sizing: border-box; /* Ensure padding is included */
    /* 确保通知容器本身没有水平滚动条 */
     overflow-x: hidden;
}

.notification-box {
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    font-size: 1em;
    opacity: 1;
    transition: opacity 0.4s ease-out, transform 0.4s ease-out; /* 更平滑的过渡 */
    display: flex; /* flex 布局消息文本和关闭按钮 */
    align-items: center;
    justify-content: space-between; /* 推向两端 */
    word-break: break-word; /* 确保长单词在达到容器边缘时换行 */
     overflow-wrap: break-word; /* 新标准属性，推荐 */
    flex-shrink: 0; /* 防止缩小 */
    width: 100%; /* 填充父容器宽度 */
    box-sizing: border-box; /* 保证内边距计算在宽度内 */
    /* 移除关闭按钮样式，因为它不再有 */
}

.notification-box.hiding {
     opacity: 0;
     transform: translateX(20px); /* 向右滑出动画 */
}

.notification-box .message {
    flex-grow: 1; /* 消息文本填充剩余空间 */
    /* margin-right: 10px; */ /* 移除关闭按钮间距 */
     word-break: break-word; /* 再强调一次换行 */
     overflow-wrap: break-word;
}

/* 通知状态颜色 (使用类似 .status 的样式) */
.notification-box.info {
     background-color: #d0f2f9; /* 浅蓝色 */
     color: #0c5460; /* 深蓝色文字 */
     border-left: 4px solid #bee5eb; /* 蓝色边框 */
}
.notification-box.success {
     background-color: #d4edda; /* 浅绿色 */
     color: #155724; /* 深绿色文字 */
     border-left: 4px solid #c3e6cb; /* 绿色边框 */
}
.notification-box.warning {
     background-color: #fff3cd; /* 浅黄色 */
     color: #856404; /* 深黄色文字 */
     border-left: 4px solid #ffeeba; /* 黄色边框 */
}
.notification-box.error {
     background-color: #f8d7da; /* 浅红色 */
     color: #721c24; /* 深红色文字 */
     border-left: 4px solid #f5c6cb; /* 红色边框 */
}

/* Footer */
footer {
    margin-top: 30px; /* 页脚上方间距 */
    padding: 20px;
    text-align: center;
    color: #6c757d; /* 灰色 */
    font-size: 0.9em;
    width: 100%;
    flex-shrink: 0;
}

footer a {
    color: #007bff; /* 标准蓝色 */
    text-decoration: none;
    transition: color 0.3s ease;
}

footer a:hover {
    color: #0056b3; /* 鼠标悬停稍深 */
    text-decoration: underline;
}

/* 响应式调整 */
@media (max-width: 850px) {
    .container {
        padding: 25px 25px;
    }
    .content-layout {
        flex-direction: column;
        gap: 30px;
    }

    .left-panel,
    .right-panel {
        min-width: auto;
        margin-bottom: 30px; /* Stacked 时增加底部间距 */
    }
     /* Stacked 时移除最后一个面板的底部间距 */
     .content-layout > *:last-child {
         margin-bottom: 0;
     }

    .action-button {
        width: 100%;
        min-width: auto;
        padding: 12px 20px;
    }

     .tab-button {
         margin: 0 2px 5px 2px;
     }

     h1 { font-size: 1.8em; }
     h2 { font-size: 1.3em; }

     #notification-container {
         top: 10px;
         right: 10px;
         left: 10px; /* 通知框占据大部分宽度 */
         max-width: none; /* 移除最大宽度限制 */
         padding: 0; /* 移除通知容器的内边距，让通知框自己的 padding 起作用 */
     }
     .notification-box {
          max-width: none; /* 移除通知框最大宽度限制 */
     }
}

@media (max-width: 480px) {
     .container {
         padding: 15px 15px;
     }
     h1 { font-size: 1.6em; }
     h2 { font-size: 1.1em; }

     .tab-button {
         font-size: 0.9em;
         padding: 10px 15px;
         min-width: auto;
     }
     .action-button {
         font-size: 1em;
     }
     footer {
         font-size: 0.8em;
         padding: 15px;
     }
}